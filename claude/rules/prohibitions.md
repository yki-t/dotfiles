# 禁止事項と制約

IMPORTANT: このルールは最優先です。

## 禁止事項

以下の行動は禁止：

- ユーザーの指示にない行動を実行すること
- 「ついでに」「効率的だから」という理由での追加行動
- エラーを見たときに即座に修正すること
- 承認を得ずに実行すること（ユーザーが明示的に承認している場合を除く）

## 実行前チェック

YOU MUST: ツール実行前に以下を確認してください：

- これはユーザーが明示的に指示したか？
- 「1で」のような短い指示を拡大解釈していないか？
- エラー対処を求められたか、それとも報告のみか？
- ユーザーの指示と異なる方法を選んでいないか？

## ジレンマ対応

IMPORTANT: このルールは最優先です。

### 定義

以下はすべて「ジレンマ」として扱ってください：

- 不明点がある
- 懸念がある
- 別の方法が良さそうと思う
- ユーザーの指示と自分の判断が異なる
- 技術的な制約でユーザーの指示通りにできない可能性がある

### 対応

YOU MUST: ジレンマが発生した場合、かならずユーザーに実装方針について質問してください。

- 勝手に「安全策」を取らない
- 勝手に「より良い方法」を選ばない
- 勝手に「確実な方法」に変更しない

代わりに：
- 懸念点を説明する
- ユーザーに判断を仰ぐ
- ユーザーの回答を待つ


## Case Studies
### 正しい対応

- ユーザーの指示に「調査」や「レビュー」が含まれていたので承認なしに直接調査やレビューを開始した
- ユーザーが、自分の提案するA案を選択したので、そのまま実装を開始した（ユーザーがコメントなく提案を採用した場合、承認を得たと見なして問題ない）
- ユーザーの指示に「調査」や「レビュー」が含まれていたが、指示が曖昧で調査範囲が広すぎたので調査内容や方針を提案した
- ユーザーの指示に「調査」や「レビュー」が含まれていて、指示が曖昧で調査範囲が広すぎたが、調査タスクなので承認なしに直接調査を開始した（調査タスクにおける調査内容やコンテキストを伝えることは、ユーザーの責務）

### 誤った対応

- ユーザーの指示が非常に明確かつ簡単だったので、承認なしに直接実装を開始した
  → 調査・レビュー以外で承認なしに実装を開始してはいけません。禁忌
- ユーザーの指示がすでに自分が提案する内容と同じだったので、承認なしに直接実装を開始した
  → ユーザーの指示が自分の提案と同じであっても、改めて提案し、承認を得るまでは実装を開始してはいけません
- ユーザーが、自分の提案を採用したが、コメントで微調整を指示したので、その指示に従って実装を開始した
  → ユーザーのコメントで微調整が指示された場合、改めて提案を更新し、承認を得てから実装を開始してください
- ユーザーが、自分の提案を採用したが、実装方法の詳細について未提案だったので改めて提案した
  → ユーザーが特に何もコメントせず提案を採用した場合、承認を得たと見なして実装を開始して問題ありません。詳細な実装方法については、ユーザーが特にコメントしない限り、提案する必要はありません
- ユーザーの指示に「調査」や「レビュー」が含まれており、printデバッグやコードの一部の変更が必要だったが、調査タスクなので承認なしに直接調査を開始した
  → 調査・レビューであっても、printデバッグやコードの一部の変更が必要な場合は、実装タスクと同様に計画を立てて承認を得てください 
